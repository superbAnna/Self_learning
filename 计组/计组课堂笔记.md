#  Computer Abstraction

计算机分为

- •

  个人计算机

- •

  服务器

- •

  嵌入式计算机

PMD:个人移动设备

## 计算机系统结构中的八个伟大思想

1.面向摩尔定律的设计

Moore's law ：单芯片集成度每2年左右翻一倍

2.使用抽象简化设计

3.加速大概率事件

4.通过并行提高性能

5.通过流水线提高性能

6.通过预测提高性能

7.存储器层次

8.通过冗余提高可靠性

## 程序

【【【硬件】系统软件】应用软件】

### 系统软件

系统软件：提供常用服务的软件，包括操作系统，编译程序，加载程序，汇编程序

最重要的两个：操作系统，编译程序

### 操作系统

用户程序和硬件之间的接口

作用：

- •

  处理基本的输入、输出操作

- •

  分配外存和内存

- •

  为多个应用程序提供共享计算机资源的服务

Tips: 内存是易失性存储，ROM,RAM这种 断电就没了

--》操作系统是为了程序在计算机上更好地运行而管理计算机资源的监控程序

### 编译程序

将高级语言翻译称为计算机你能识别的机器语言

高级语言程序（C++，java,python) -> 汇编程序语言（MIPS指令集）-> 机器语言

## 硬件

计算机5个部件：输入设备、输出设备（I/O设备）,存储器，数据通路，和控制器

显示器 ：大多数PMD都是液晶显示(LCD)

处理器：逻辑上分为数据通路和控制器

- •

  数据通路：完成算术运算

- •

  控制器：指导数据通路、存储器、I/O设备按照程序指令正确执行

处理器内部使用缓存

硬件和底层软件之间结尾口被抽象命名为**指令体系结构**

易失性存储器：仅仅在通电时保存数据

非易失性存储器：仅仅在掉电时仍然保存数据的存储器

计算机一般使用磁盘（disk) 作为非易失性存储器，而PMD设备则才采用闪存（基于体积，电容，耗能），但是闪存比DRAM慢很多

## 处理器和存储器的制造

芯片（chip) ：从晶圆上切分出来的小矩形

每芯片价格 = \frac{每片晶圆价格}{每晶圆芯片数\times成品率}

每晶圆芯片数\approx\frac{晶圆面积}{芯片面积}

成品率 =\frac{1}{(1+\frac{芯片面积\times单位面积瑕疵数}{2})^2}

## 计算机性能

服务器更关注吞吐量，PMD和个人PC设备则更关心响应时间

响应时间：计算机完成某任务的时间，包括硬盘访问、内存访问、I/O活动，操作系统开销，CPU执行时间

吞吐量：带宽，性能的另外一种度量参数，表示单位时间内完成任务的数量

CPU时间：执行某一任务在CPU上花费的时间

### CPU性能

一个程序CPU执行时间 = 一个程序的CPU时钟周期数 \times 时钟周期时间

 一个程序CPU执行时间 = 一个程序的CPU时钟周期数 / 时钟周期频率

计算机通过执行指令来运行程序，所以执行时间还和指令数联系

CPU时钟周期数 = 指令数 \times 每条指令平均需要的时钟周期数

这里定义ＣＰＩ为每条指令平均所需要的周期数

基于以上可得

CPU时间 = CPI\times 指令数\times时钟周期时间

CPU时间 = 指令数 \times CPI/时钟频率

？ 影响ＣＰＵ性能：算法，编程语言，编程程序，指令体系结构

## 功耗

评价功耗，能耗(J/s)比功耗更合理 

IC集成电路技术主要是CMOS,主要能耗是动态能耗（晶体管状态翻转产生的)

能耗 = 负载电容\times 电压^2

一个晶体管消耗的能量 = 1/2\times负载电容\times电压^2

功耗 = 1/2 \times 负载电容 \times 电压^2 \times 开关频率

##  单核到多核处理器

利用并行加快运行速度

挑战：调度，负载平衡，通信，同步（例如cache之间的同步）

## conclusion

### 易误点

> 性能提升与改进大小不成正比

Admahl定律：

改进后的时间 = 受影响改进的时间/改进量 +不受影响的执行时间

> 不能简单的用某一个单一因素 度量性能

MIPS 引入（每秒百万条指令）

MIPS = 指令数/（执行时间\times 10^6)

> 面向性能的设计和面向能量效率的设计具有不相关的目标

### All of the chapter

- •

  **最重要的抽象层次是底层程序和硬件之间的接口->指令体系结构**

- •

  执行时间是唯一有效且不可推翻的性能度量方法

计算机组织的两个新思想：

- •

  通过并行提高效率,借助多核处理器

- •

  开发存储器层次结构的访问局部性（比如通过cache)

# 指令 ：计算机的语言（编译器和计算机之间的接口)

！！！最重要的抽象层次